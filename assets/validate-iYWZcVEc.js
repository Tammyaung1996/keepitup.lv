import{V as $,G as A,j as L,o as C,C as S,D as B,K as f,H as F,X as k,M as _,L as z,y as U,F as Fe,g as Me,aq as Be,d as H,r as c,c as E,ar as D,aj as Ee,Y as ae,n as se,Z as Ve,$ as v,w as Pe,as as Te,af as Ie,S as Z,U as Y,al as j,at as ze,a9 as De,au as ee,ab as Oe,av as Ne,ad as ie,E as Re,aw as ne,I,ax as We,ay as Le,ac as Ue,az as je,Q as Ae}from"./__uno--KafPJDN.js";import{a as He,u as de,s as Ze}from"./formDetails-g-zprVQ3.js";import{b as Ye,l as qe}from"./shared--EFbdYCe.js";import{s as Ge}from"./icon-4BzMejV4.js";import{i as q}from"./main-IOY9v_bm.js";const G={value:{type:null,required:!0},id:{type:String,default:""},isFocusing:Boolean,size:{type:String,default:"normal"},variant:{type:String,default:"standard"},placeholder:String,line:{type:Boolean,default:!0},hint:{type:Boolean,default:!0},hintCenter:{type:Boolean,default:!0},textColor:String,focusColor:String,blurColor:String,errorMessage:String,formDisabled:Boolean,disabled:Boolean,clearable:Boolean,cursor:String,composing:Boolean,onClick:$(),onClear:$()};var Ke=(e,n,r)=>new Promise((d,l)=>{var w=s=>{try{m(r.next(s))}catch(h){l(h)}},i=s=>{try{m(r.throw(s))}catch(h){l(h)}},m=s=>s.done?d(s.value):Promise.resolve(s.value).then(w,i);m((r=r.apply(e,n)).next())});const{name:Qe,n:W,classes:Xe}=A("field-decorator"),Je=["for"];function xe(e,n){const r=L("var-icon");return C(),S("div",{class:f(e.classes(e.n(),e.n("$--box"),e.n("--".concat(e.variant)),[e.size==="small",e.n("--small")],[e.disabled,e.n("--disabled")])),onClick:n[0]||(n[0]=(...d)=>e.handleClick&&e.handleClick(...d))},[B("div",{class:f(e.classes(e.n("controller"),[e.isFocusing,e.n("--focus")],[e.errorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")])),style:k({color:e.color,cursor:e.cursor,overflow:e.isFloating?"visible":"hidden","--field-decorator-middle-offset-left":e.middleOffsetLeft,"--field-decorator-middle-offset-width":e.middleOffsetWidth,"--field-decorator-middle-offset-height":e.middleOffsetHeight})},[B("div",{class:f(e.classes(e.n("icon"),[!e.hint,e.n("--icon-non-hint")]))},[F(e.$slots,"prepend-icon")],2),B("div",{ref:"middleEl",class:f(e.classes(e.n("middle"),[!e.hint,e.n("--middle-non-hint")]))},[F(e.$slots,"default")],2),e.placeholder&&e.hint?(C(),S("label",{key:0,class:f(e.classes(e.n("placeholder"),e.n("$--ellipsis"),[e.isFocusing,e.n("--focus")],[e.hintCenter,e.n("--hint-center")],[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--error")],[e.transitionDisabled,e.n("--transition-disabled")],e.computePlaceholderState())),style:k({color:e.color}),for:e.id},[B("span",null,_(e.placeholder),1)],14,Je)):z("v-if",!0),B("div",{class:f(e.classes(e.n("icon"),[!e.hint,e.n("--icon-non-hint")]))},[e.clearable&&!e.isEmpty(e.value)?F(e.$slots,"clear-icon",{key:0,clear:e.handleClear},()=>[U(r,{class:f(e.n("clear-icon")),"var-field-decorator-cover":"",name:"close-circle",onClick:e.handleClear},null,8,["class","onClick"])]):z("v-if",!0),F(e.$slots,"append-icon")],2)],6),e.line?(C(),S(Fe,{key:0},[e.variant==="outlined"?(C(),S("fieldset",{key:0,class:f(e.classes(e.n("line"),[e.isFocusing,e.n("--line-focus")],[e.errorMessage,e.n("--line-error")],[e.formDisabled||e.disabled,e.n("--line-disabled")])),style:k({borderColor:e.color})},[B("legend",{class:f(e.classes(e.n("line-legend"),[e.isFloating,e.n("line-legend--hint")])),style:k({width:e.legendWidth})},[e.placeholder&&e.hint?(C(),Me(Be,{key:0,to:"body"},[B("span",{ref:"placeholderTextEl",class:f(e.classes(e.n("placeholder-text"),e.n("$--ellipsis"),[e.size==="small",e.n("placeholder-text--small")]))},_(e.placeholder),3)])):z("v-if",!0)],6)],6)):(C(),S("div",{key:1,class:f(e.classes(e.n("line"),[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:k({background:e.errorMessage?void 0:e.blurColor})},[B("div",{class:f(e.classes(e.n("dot"),[e.isFocusing,e.n("--line-focus")],[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:k({background:e.errorMessage?void 0:e.focusColor})},null,6)],6))],64)):z("v-if",!0)],2)}const te=H({name:Qe,components:{VarIcon:Ge},props:G,setup(e){const n=c(null),r=c(null),d=c(""),l=c("0px"),w=c("0px"),i=c("0px"),m=c(!0),s=E(()=>e.hint&&(!D(e.value)||e.isFocusing)),{popup:h,bindPopup:M}=Ye(),P=E(()=>e.errorMessage?void 0:e.isFocusing?e.focusColor:e.blurColor);Ee(y),ae(()=>{y(),se().then(()=>{m.value=!1})}),Ve(y),v(M,null),h&&Pe(()=>h.show.value,t=>Ke(this,null,function*(){t&&(yield Ie(),y())}));function u(){const{hint:t,value:T,composing:N}=e;if(!t&&(!D(T)||N))return W("--placeholder-hidden");if(s.value)return W("--placeholder-hint")}function g(t){v(e.onClear,t)}function b(t){v(e.onClick,t)}function y(){if(l.value="".concat(r.value.offsetLeft,"px"),w.value="".concat(r.value.offsetWidth,"px"),i.value="".concat(r.value.offsetHeight,"px"),e.variant==="outlined"&&n.value){const t=Te(n.value),T="var(--field-decorator-outlined-".concat(e.size,"-placeholder-space)");d.value="calc(".concat(t.width," * 0.75 + ").concat(T," * 2)")}}return{placeholderTextEl:n,middleEl:r,middleOffsetLeft:l,middleOffsetWidth:w,middleOffsetHeight:i,color:P,legendWidth:d,isFloating:s,transitionDisabled:m,resize:y,computePlaceholderState:u,n:W,classes:Xe,isEmpty:D,handleClear:g,handleClick:b}}});te.render=xe;var K=te;Z(K);Y(K,G);var _e=K;const ue={disabled:Boolean,readonly:Boolean,scrollToError:String,scrollToErrorOffsetY:{type:[String,Number],default:0},onSubmit:$(),onReset:$()};var oe=(e,n,r)=>new Promise((d,l)=>{var w=s=>{try{m(r.next(s))}catch(h){l(h)}},i=s=>{try{m(r.throw(s))}catch(h){l(h)}},m=s=>s.done?d(s.value):Promise.resolve(s.value).then(w,i);m((r=r.apply(e,n)).next())});const{name:en,n:nn}=A("form");function on(e,n){return C(),S("form",{class:f(e.n()),onSubmit:n[0]||(n[0]=(...r)=>e.handleSubmit&&e.handleSubmit(...r)),onReset:n[1]||(n[1]=(...r)=>e.handleReset&&e.handleReset(...r))},[F(e.$slots,"default")],34)}const fe=H({name:en,props:ue,setup(e){const n=E(()=>e.disabled),r=E(()=>e.readonly),{formItems:d,bindFormItems:l}=He();l({disabled:n,readonly:r});function i(u){setTimeout(()=>{const g=De(u),b=g===window?0:ee(g),y=ee(u)-b-Oe(e.scrollToErrorOffsetY);Ne(g,{top:y,animation:qe})},300)}function m(u){return oe(this,null,function*(){j(u);const g=yield h();v(e.onSubmit,g)})}function s(u){j(u),M(),v(e.onReset)}function h(){return oe(this,null,function*(){var u;const g=yield Promise.all(d.map(({validate:b})=>b()));if(e.scrollToError){const[,b]=ze(g,t=>t===!1,e.scrollToError),y=b>-1;if(y){const t=(u=d[b].instance.proxy)==null?void 0:u.$el;i(t)}return!y}return g.every(b=>b===!0)})}function M(){return d.forEach(({reset:u})=>u())}function P(){return d.forEach(({resetValidation:u})=>u())}return{n:nn,handleSubmit:m,handleReset:s,validate:h,reset:M,resetValidation:P}}});fe.render=on;var O=fe;O.useValidation=ie;O.useForm=de;Z(O);Y(O,ue);const cn=O;var ln=Object.defineProperty,le=Object.getOwnPropertySymbols,rn=Object.prototype.hasOwnProperty,an=Object.prototype.propertyIsEnumerable,re=(e,n,r)=>n in e?ln(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,sn=(e,n)=>{for(var r in n||(n={}))rn.call(n,r)&&re(e,r,n[r]);if(le)for(var r of le(n))an.call(n,r)&&re(e,r,n[r]);return e};const me=sn({modelValue:String,modelModifiers:{type:Object,default:()=>({})},type:{type:String,default:"text"},textarea:Boolean,rows:{type:[String,Number],default:8},maxlength:[String,Number],readonly:Boolean,resize:Boolean,autofocus:Boolean,validateTrigger:{type:Array,default:()=>["onInput","onClear"]},rules:Array,enterkeyhint:String,onFocus:$(),onBlur:$(),onInput:$(),onChange:$(),onClear:$(),"onUpdate:modelValue":$()},Re(G,["size","variant","placeholder","line","hint","textColor","focusColor","blurColor","disabled","clearable","onClick"])),{name:dn,n:tn,classes:un}=A("input"),fn=["placeholder","enterkeyhint"],mn=["id","disabled","readonly","type","value","placeholder","maxlength","rows","enterkeyhint","inputmode"],hn=["id","disabled","readonly","type","value","placeholder","maxlength","enterkeyhint","inputmode"];function pn(e,n){const r=L("var-field-decorator"),d=L("var-form-details");return C(),S("div",{class:f(e.classes(e.n(),e.n("$--box"))),onMousedown:n[13]||(n[13]=(...l)=>e.handleMousedown&&e.handleMousedown(...l))},[U(r,We(Le({value:e.modelValue,id:e.id,size:e.size,variant:e.variant,placeholder:e.placeholder,line:e.line,hint:e.hint,textColor:e.textColor,focusColor:e.focusColor,blurColor:e.blurColor,isFocusing:e.isFocusing,errorMessage:e.errorMessage,formDisabled:e.formDisabled,disabled:e.disabled,clearable:e.clearable,cursor:e.cursor,composing:e.isComposing,hintCenter:!e.textarea,onClick:e.handleClick,onClear:e.handleClear})),ne({"clear-icon":I(({clear:l})=>[F(e.$slots,"clear-icon",{clear:l})]),"append-icon":I(()=>[F(e.$slots,"append-icon")]),default:I(()=>[e.normalizedType==="password"?(C(),S("input",{key:0,tabindex:"-1",class:f(e.n("autocomplete")),placeholder:e.hint?void 0:e.placeholder,style:k({"--input-placeholder-color":e.placeholderColor}),enterkeyhint:e.enterkeyhint},null,14,fn)):z("v-if",!0),e.textarea?(C(),S("textarea",{key:1,class:f(e.classes(e.n("input"),e.n("--textarea"),[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--error")],[e.errorMessage,e.n("--caret-error")])),ref:"el",autocomplete:"new-password",id:e.id,disabled:e.formDisabled||e.disabled,readonly:e.formReadonly||e.readonly,type:e.normalizedType,value:e.modelValue,placeholder:e.hint?void 0:e.placeholder,maxlength:e.maxlength,rows:e.rows,enterkeyhint:e.enterkeyhint,inputmode:e.type==="number"?"numeric":void 0,style:k({color:e.errorMessage?void 0:e.textColor,caretColor:e.errorMessage?void 0:e.focusColor,resize:e.resize?"vertical":"none","--input-placeholder-color":e.placeholderColor}),onFocus:n[0]||(n[0]=(...l)=>e.handleFocus&&e.handleFocus(...l)),onBlur:n[1]||(n[1]=(...l)=>e.handleBlur&&e.handleBlur(...l)),onInput:n[2]||(n[2]=(...l)=>e.handleInput&&e.handleInput(...l)),onChange:n[3]||(n[3]=(...l)=>e.handleChange&&e.handleChange(...l)),onCompositionstart:n[4]||(n[4]=(...l)=>e.handleCompositionStart&&e.handleCompositionStart(...l)),onCompositionend:n[5]||(n[5]=(...l)=>e.handleCompositionEnd&&e.handleCompositionEnd(...l))},null,46,mn)):(C(),S("input",{key:2,class:f(e.classes(e.n("input"),[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--error")],[e.errorMessage,e.n("--caret-error")])),ref:"el",autocomplete:"new-password",id:e.id,disabled:e.formDisabled||e.disabled,readonly:e.formReadonly||e.readonly,type:e.normalizedType,value:e.modelValue,placeholder:e.hint?void 0:e.placeholder,maxlength:e.maxlength,enterkeyhint:e.enterkeyhint,inputmode:e.type==="number"?"numeric":void 0,style:k({color:e.errorMessage?void 0:e.textColor,caretColor:e.errorMessage?void 0:e.focusColor,"--input-placeholder-color":e.placeholderColor}),onFocus:n[6]||(n[6]=(...l)=>e.handleFocus&&e.handleFocus(...l)),onBlur:n[7]||(n[7]=(...l)=>e.handleBlur&&e.handleBlur(...l)),onInput:n[8]||(n[8]=(...l)=>e.handleInput&&e.handleInput(...l)),onChange:n[9]||(n[9]=(...l)=>e.handleChange&&e.handleChange(...l)),onCompositionstart:n[10]||(n[10]=(...l)=>e.handleCompositionStart&&e.handleCompositionStart(...l)),onCompositionend:n[11]||(n[11]=(...l)=>e.handleCompositionEnd&&e.handleCompositionEnd(...l))},null,46,hn))]),_:2},[e.$slots["prepend-icon"]?{name:"prepend-icon",fn:I(()=>[F(e.$slots,"prepend-icon")]),key:"0"}:void 0]),1040),U(d,{"error-message":e.errorMessage,"extra-message":e.maxlengthText,onMousedown:n[12]||(n[12]=Ue(()=>{},["stop"]))},ne({_:2},[e.$slots["extra-message"]?{name:"extra-message",fn:I(()=>[F(e.$slots,"extra-message")]),key:"0"}:void 0]),1032,["error-message","extra-message"])],34)}const he=H({name:dn,components:{VarFormDetails:Ze,VarFieldDecorator:_e},props:me,setup(e){const n=je(),r=c(null),d=c(!1),l=c(!1),{bindForm:w,form:i}=de(),{errorMessage:m,validateWithTrigger:s,validate:h,resetValidation:M}=ie(),P=E(()=>e.disabled||e.readonly?"":"text"),u=E(()=>e.type==="number"?"text":e.type),g=E(()=>{const{maxlength:o,modelValue:a}=e;return o?D(a)?"0 / ".concat(o):"".concat(String(a).length,"/").concat(o):""}),b=E(()=>{const{hint:o,blurColor:a,focusColor:p}=e;if(!o)return m.value?"var(--field-decorator-error-color)":d.value?p||"var(--field-decorator-focus-color)":a||"var(--field-decorator-placeholder-color, var(--field-decorator-blur-color))"});v(w,{reset:J,validate:x,resetValidation:M}),ae(()=>{e.autofocus&&R()});function t(o){se(()=>{const{validateTrigger:a,rules:p,modelValue:V}=e;s(a,o,p,V)})}function T(o){d.value=!0,v(e.onFocus,o),t("onFocus")}function N(o){d.value=!1,v(e.onBlur,o),t("onBlur")}function X(o){const a=o.target;let{value:p}=a;e.type==="number"&&(p=ce(p));const V=Se($e(p));return V===e.modelValue&&(a.value=V),V}function pe(){l.value=!0}function ve(o){l.value&&(l.value=!1,o.target.dispatchEvent(new Event("input")))}function ge(o){if(l.value)return;const a=X(o);v(e["onUpdate:modelValue"],a),v(e.onInput,a,o),t("onInput")}function be(o){const a=X(o);v(e.onChange,a,o),t("onChange")}function ye(){const{disabled:o,readonly:a,clearable:p,onClear:V}=e;i!=null&&i.disabled.value||i!=null&&i.readonly.value||o||a||!p||(v(e["onUpdate:modelValue"],""),v(V,""),t("onClear"))}function Ce(o){const{disabled:a,onClick:p}=e;i!=null&&i.disabled.value||a||(v(p,o),t("onClick"))}function ce(o){const a=o.indexOf("-"),p=o.indexOf(".");return a>-1&&(o=a===0?"-"+o.replace(/-/g,""):o.replace(/-/g,"")),p>-1&&(o=o.slice(0,p+1)+o.slice(p).replace(/\./g,"")),o.replace(/[^-0-9.]/g,"")}function $e(o){return e.modelModifiers.trim?o.trim():o}function Se(o){return e.maxlength?o.slice(0,Ae(e.maxlength)):o}function we(o){const{disabled:a}=e;i!=null&&i.disabled.value||a||o.target===r.value||(R(),j(o))}function J(){v(e["onUpdate:modelValue"],""),M()}function x(){return h(e.rules,e.modelValue)}function R(){var o;(o=r.value)==null||o.focus()}function ke(){r.value.blur()}return{el:r,id:n,isFocusing:d,isComposing:l,errorMessage:m,placeholderColor:b,normalizedType:u,cursor:P,maxlengthText:g,formDisabled:i==null?void 0:i.disabled,formReadonly:i==null?void 0:i.readonly,n:tn,classes:un,isEmpty:D,handleFocus:T,handleBlur:N,handleInput:ge,handleChange:be,handleClear:ye,handleClick:Ce,handleCompositionStart:pe,handleCompositionEnd:ve,handleMousedown:we,validate:x,resetValidation:M,reset:J,focus:R,blur:ke}}});he.render=pn;var Q=he;Z(Q);Y(Q,me);const $n=Q;function Sn(e=q.global.t("Value cannot be empty")){return n=>!!n||e}function wn(e=q.global.t("Email format error")){return n=>/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(n)||e}function kn(e,n){return n=n!=null?n:q.global.t("Length must be {length}",{length:e}),r=>r.length===e||n}export{$n as _,cn as a,wn as b,kn as c,Sn as v};
