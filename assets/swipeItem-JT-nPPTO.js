import{f as Ne,a as ze,s as De}from"./icon-4BzMejV4.js";import{W as Be,V as We,G as x,j as O,a4 as Ae,O as Ye,o as w,C as T,D as Le,H as $,K as c,X as F,y as I,I as C,L as b,P as U,ax as V,J,F as Ve,a8 as Xe,ay as He,d as ee,r as g,c as Q,aG as Fe,$ as E,w as Z,aL as Me,aa as Re,aj as Ke,Q as X,af as H,al as je,_ as qe,ak as Ge,S as ne,U as Oe,a2 as Ue,a3 as Je}from"./__uno--KafPJDN.js";import{b as Qe}from"./shared--EFbdYCe.js";const ae=Symbol("SWIPE_BIND_SWIPE_ITEM_KEY");function Ze(){const{childProviders:e,length:o,bindChildren:t}=Be(ae);return{length:o,swipeItems:e,bindSwipeItems:t}}const te={loop:{type:Boolean,default:!0},autoplay:[String,Number],duration:{type:[String,Number],default:300},initialIndex:{type:[String,Number],default:0},navigation:{type:[Boolean,String],default:!1},indicator:{type:Boolean,default:!0},indicatorColor:String,vertical:Boolean,touchable:{type:Boolean,default:!0},onChange:We()};var y=(e,o,t)=>new Promise((h,u)=>{var a=f=>{try{i(t.next(f))}catch(m){u(m)}},s=f=>{try{i(t.throw(f))}catch(m){u(m)}},i=f=>f.done?h(f.value):Promise.resolve(f.value).then(a,s);i((t=t.apply(e,o)).next())});const _e=250,xe=20,{name:en,n:_,classes:nn}=x("swipe"),an=["onClick"];function tn(e,o){const t=O("var-icon"),h=O("var-button"),u=Ae("hover");return Ye((w(),T("div",{class:c(e.n()),ref:"swipeEl"},[Le("div",{class:c(e.classes(e.n("track"),[e.vertical,e.n("--vertical")])),style:F({width:e.vertical?void 0:"".concat(e.trackSize,"px"),height:e.vertical?"".concat(e.trackSize,"px"):void 0,transform:"translate".concat(e.vertical?"Y":"X","(").concat(e.trackTranslate,"px)"),transitionDuration:e.lockDuration?"0ms":"".concat(e.toNumber(e.duration),"ms")}),onTouchstart:o[0]||(o[0]=(...a)=>e.handleTouchstart&&e.handleTouchstart(...a)),onTouchmove:o[1]||(o[1]=(...a)=>e.handleTouchmove&&e.handleTouchmove(...a)),onTouchend:o[2]||(o[2]=(...a)=>e.handleTouchend&&e.handleTouchend(...a))},[$(e.$slots,"default")],38),e.navigation?$(e.$slots,"prev",V(J({key:0},{index:e.index,length:e.length,prev:e.prev,next:e.next,to:e.to,hovering:e.hovering})),()=>[I(U,{name:e.getNavigationAnimation("prev")},{default:C(()=>[e.navigation===!0||e.hovering?(w(),T("div",{key:0,class:c(e.classes(e.n("navigation"),e.n("navigation-prev"),[e.vertical,e.n("--navigation-vertical-prev")]))},[I(h,{"var-swipe-cover":"",disabled:!e.loop&&e.index===0,class:c(e.n("navigation-prev-button")),onClick:o[3]||(o[3]=a=>e.prev())},{default:C(()=>[I(t,{"var-swipe-cover":"",class:c(e.n("navigation-prev-button-icon")),name:e.vertical?"chevron-up":"chevron-left"},null,8,["class","name"])]),_:1},8,["disabled","class"])],2)):b("v-if",!0)]),_:1},8,["name"])]):b("v-if",!0),e.navigation?$(e.$slots,"next",V(J({key:1},{index:e.index,length:e.length,hovering:e.hovering,prev:e.prev,next:e.next,to:e.to})),()=>[I(U,{name:e.getNavigationAnimation("next")},{default:C(()=>[e.navigation===!0||e.hovering?(w(),T("div",{key:0,class:c(e.classes(e.n("navigation"),e.n("navigation-next"),[e.vertical,e.n("--navigation-vertical-next")]))},[I(h,{"var-swipe-cover":"",class:c(e.n("navigation-next-button")),disabled:!e.loop&&e.index===e.length-1,onClick:o[4]||(o[4]=a=>e.next())},{default:C(()=>[I(t,{"var-swipe-cover":"",class:c(e.n("navigation-next-button-icon")),name:e.vertical?"chevron-down":"chevron-right"},null,8,["class","name"])]),_:1},8,["class","disabled"])],2)):b("v-if",!0)]),_:1},8,["name"])]):b("v-if",!0),$(e.$slots,"indicator",V(He({index:e.index,length:e.length,hovering:e.hovering,prev:e.prev,next:e.next,to:e.to})),()=>[e.indicator&&e.length?(w(),T("div",{key:0,class:c(e.classes(e.n("indicators"),[e.vertical,e.n("--indicators-vertical")]))},[(w(!0),T(Ve,null,Xe(e.length,(a,s)=>(w(),T("div",{class:c(e.classes(e.n("indicator"),[e.index===s,e.n("--indicator-active")],[e.vertical,e.n("--indicator-vertical")])),style:F({background:e.indicatorColor}),key:a,onClick:i=>e.to(s)},null,14,an))),128))],2)):b("v-if",!0)])],2)),[[u,e.handleHovering]])}const ie=ee({name:en,directives:{Hover:Ne},components:{VarButton:ze,VarIcon:De},props:te,setup(e){const o=g(null),t=g(0),h=Q(()=>e.vertical),u=g(0),a=g(0),s=g(!1),i=g(0),f=g(!1),{swipeItems:m,bindSwipeItems:oe,length:l}=Ze(),{popup:R,bindPopup:re}=Qe(),{deltaX:ue,deltaY:se,moveX:ve,moveY:de,offsetX:fe,offsetY:ce,touching:K,direction:he,startTime:me,startTouch:pe,moveTouch:ge,endTouch:we}=Fe(),j=Q(()=>he.value===(e.vertical?"vertical":"horizontal"));let q=!1,z=-1;oe({size:t,currentIndex:i,vertical:h}),E(re,null),Z(()=>l.value,()=>y(this,null,function*(){yield H(),A(),S()})),R&&Z(()=>R.show.value,n=>y(this,null,function*(){n?(yield H(),S()):k()})),Me(S),Re(k),Ke(S);function p(n){return m.find(({index:r})=>r.value===n)}function Te(){e.loop&&(a.value>=0&&p(l.value-1).setTranslate(-u.value),a.value<=-(u.value-t.value)&&p(0).setTranslate(u.value),a.value>-(u.value-t.value)&&a.value<0&&(p(l.value-1).setTranslate(0),p(0).setTranslate(0)))}function D(n){const r=qe(n)?n:Math.floor((a.value-t.value/2)/-t.value),{loop:v}=e;return r<=-1?v?-1:0:r>=l.value?v?l.value:l.value-1:r}function Ie(n){const{loop:r}=e;return n===-1?r?l.value-1:0:n===l.value?r?0:l.value-1:n}function B(n){return e.loop?n<0?l.value+n:n>=l.value?n-l.value:n:Ge(n,0,l.value-1)}function W(){return y(this,null,function*(){const n=a.value>=t.value,r=a.value<=-u.value,v=0,d=-(u.value-t.value);s.value=!0,(n||r)&&(s.value=!0,a.value=r?v:d,p(0).setTranslate(0),p(l.value-1).setTranslate(0)),yield H(),s.value=!1})}function A(){q||(i.value=B(X(e.initialIndex)),q=!0)}function Y(){const{autoplay:n}=e;!n||l.value<=1||(k(),z=window.setTimeout(()=>{L(),Y()},X(n)))}function k(){z&&clearTimeout(z)}function ye(n){return y(this,null,function*(){l.value<=1||!e.touchable||(pe(n),k(),yield W(),s.value=!0)})}function Se(n){const{touchable:r,vertical:v}=e;!K.value||!r||(ge(n),j.value&&(je(n),a.value+=v?de.value:ve.value,Te()))}function be(){if(!K.value||(we(),!j.value))return;const{vertical:n,onChange:r}=e,v=n?se.value<0:ue.value<0,d=n?ce.value:fe.value,P=performance.now()-me.value<=_e&&d>=xe?D(v?i.value+1:i.value-1):D();s.value=!1,a.value=P*-t.value;const Ee=i.value;i.value=Ie(P),Y(),Ee!==i.value&&E(r,i.value)}function $e(n){e.navigation==="hover"&&(f.value=n)}function ke(n){return e.navigation!=="hover"?"":_("--navigation".concat(e.vertical?"-vertical":"","-").concat(n,"-animation"))}function S(){o.value&&(s.value=!0,t.value=e.vertical?o.value.offsetHeight:o.value.offsetWidth,u.value=t.value*l.value,a.value=i.value*-t.value,m.forEach(n=>{n.setTranslate(0)}),Y(),setTimeout(()=>{s.value=!1}))}function L(n){return y(this,null,function*(){if(l.value<=1)return;A();const{loop:r,onChange:v}=e,d=i.value;if(i.value=B(d+1),(n==null?void 0:n.event)!==!1&&E(v,i.value),yield W(),d===l.value-1&&r){p(0).setTranslate(u.value),a.value=l.value*-t.value;return}d!==l.value-1&&(a.value=i.value*-t.value)})}function G(n){return y(this,null,function*(){if(l.value<=1)return;A();const{loop:r,onChange:v}=e,d=i.value;if(i.value=B(d-1),(n==null?void 0:n.event)!==!1&&E(v,i.value),yield W(),d===0&&r){p(l.value-1).setTranslate(-u.value),a.value=t.value;return}d!==0&&(a.value=i.value*-t.value)})}function Pe(n,r){if(l.value<=1||n===i.value)return;n=n<0?0:n,n=n>=l.value?l.value:n;const v=n>i.value?L:G,d=Math.abs(n-i.value);Array.from({length:d}).forEach((Ce,P)=>{v({event:P===d-1?r==null?void 0:r.event:!1})})}return{length:l,index:i,swipeEl:o,trackSize:u,trackTranslate:a,lockDuration:s,hovering:f,n:_,classes:nn,handleTouchstart:ye,handleTouchmove:Se,handleTouchend:be,next:L,prev:G,to:Pe,resize:S,toNumber:X,handleHovering:$e,getNavigationAnimation:ke}}});ie.render=tn;var N=ie;ne(N);Oe(N,te);const hn=N;var mn=N;function ln(){const{bindParent:e,index:o,parentProvider:t}=Ue(ae);return e||Je("SwipeItem","<var-swipe-item/> must in <var-swipe/>"),{index:o,swipe:t,bindSwipe:e}}const{name:on,n:rn}=x("swipe-item"),un=["aria-hidden"];function sn(e,o){return w(),T("div",{class:c(e.n()),style:F({width:e.vertical?void 0:"".concat(e.size,"px"),height:e.vertical?"".concat(e.size,"px"):void 0,transform:"translate".concat(e.vertical?"Y":"X","(").concat(e.translate,"px)")}),tabindex:"-1","aria-hidden":e.currentIndex===e.index?"false":"true"},[$(e.$slots,"default")],14,un)}const le=ee({name:on,setup(){const e=g(0),{swipe:o,bindSwipe:t,index:h}=ln(),{size:u,currentIndex:a,vertical:s}=o;t({index:h,setTranslate:f});function f(m){e.value=m}return{n:rn,size:u,index:h,currentIndex:a,vertical:s,translate:e}}});le.render=sn;var M=le;ne(M);const pn=M;var gn=M;export{pn as _,hn as a,mn as b,gn as s};
